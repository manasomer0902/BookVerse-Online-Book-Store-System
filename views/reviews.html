<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Student Reviews | BookVerse</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
</head>
<body>

<!-- ================= NAVBAR ================= -->
<header class="navbar">
  <a href="/" class="logo">
    <img src="/images/logo.png" alt="BookVerse Logo">
    <span>BookVerse | Online Computer Book Store</span>
  </a>

  <nav>
    <a href="/">Home</a>
    <a href="#footer">About</a>
    <a href="/books">View Books</a>
    <a href="/contact">Contact</a>
    <a href="/reviews" class="active">Feedback</a>

    <span id="myOrdersLink"></span>

    <a href="#" class="cart-icon" onclick="openCart()">
      ðŸ›’ <span id="cartCount" class="cart-badge">0</span>
    </a>

    <span id="authArea"></span>
  </nav>
</header>

<!-- ================= REVIEW SECTION ================= -->
<section class="order-section">
  <div class="order-card">

    <h2>Student Reviews</h2>
    <p class="order-subtitle">
      Share your experience and read what other students say about BookVerse.
    </p>

    <!-- ===== SUBMIT REVIEW ===== -->
    <form onsubmit="submitReview(event)" style="margin-top:25px">

      <div class="form-group">
        <label>Your Name</label>
        <input type="text" id="name" required placeholder="Enter your name">
      </div>

      <div class="form-group">
        <label>Book Purchased (optional)</label>
        <input type="text" id="bookName" placeholder="Which book did you buy?">
      </div>

      <div class="form-group">
        <label>Your Review</label>
        <textarea
          id="review"
          rows="4"
          required
          placeholder="Write your honest review..."
          style="width:100%; padding:12px; border-radius:6px; border:1px solid #cbd5e1;"
        ></textarea>
      </div>

      <button type="submit" class="btn-primary full-btn">
        Submit Review
      </button>
    </form>

    <!-- ===== REVIEWS LIST ===== -->
    <hr style="margin:35px 0;">

    <h3>What Students Say</h3>

    <div id="reviews" style="margin-top:20px"></div>

  </div>
</section>

<!-- ================= FOOTER ================= -->
<footer id="footer" class="site-footer">

  <div class="footer-top">

    <div class="footer-about">
      <h2>About BookVerse</h2>
      <p>
        BookVerse is an online computer book store designed for students,
        developers, and professionals. We provide high-quality academic
        and technical books in both <strong>Hard Copy</strong> and
        <strong>Soft Copy (PDF)</strong> formats.
      </p>
      <p>
        Our goal is to make learning affordable, fast, and accessible
        from anywhere.
      </p>
    </div>

    <div class="footer-links">
      <h4>Helpful Links</h4>
      <ul>
        <li><a href="/privacy">Privacy Policy</a></li>
        <li><a href="/terms">Terms & Conditions</a></li>
        <li><a href="/refund">Cancellation Policy</a></li>
        <li><a href="#footer">About Us</a></li>
      </ul>
    </div>

  </div>

  <div class="footer-bottom">
    <div class="footer-brand">
      <h3>BookVerse</h3>
      <p>
        One of the most trusted online computer book platforms.
        Learn, grow, and build your future with quality resources.
      </p>
    </div>

    <div class="footer-contact">
      <h4>Get in Touch</h4>
      <p>Email:</p>
      <a href="mailto:bookverse@gmail.com">bookverse@gmail.com</a>
    </div>
  </div>

  <div class="footer-copy">
    Â© 2026 BookVerse | All Rights Reserved
  </div>

</footer>

<!-- ================= SCRIPTS ================= -->
<script src="/js/common.js"></script>

<script>
async function submitReview(e) {
  e.preventDefault();

  const data = {
    name: document.getElementById("name").value,
    bookName: document.getElementById("bookName").value,
    review: document.getElementById("review").value
  };

  const res = await fetch("/api/review", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data)
  });

  if (res.ok) {
    alert("Thank you for your review!");
    e.target.reset();
    loadReviews();
  } else {
    alert("Failed to submit review");
  }
}

async function loadReviews() {
  const res = await fetch("/api/review");
  const data = await res.json();

  const div = document.getElementById("reviews");
  div.innerHTML = "";

  if (!data.length) {
    div.innerHTML = "<p>No reviews yet.</p>";
    return;
  }

  data.forEach(r => {
    div.innerHTML += `
      <div style="
        background:#f8fafc;
        padding:15px;
        border-radius:10px;
        margin-bottom:12px;
        box-shadow:0 4px 10px rgba(0,0,0,0.05)
      ">
        <p style="font-weight:600">${r.name}</p>
        ${r.bookName ? `<p style="font-size:13px;color:#64748b">Book: ${r.bookName}</p>` : ""}
        <p style="margin-top:8px">${r.review}</p>
      </div>
    `;
  });
}

loadReviews();
</script>

</body>
</html>
